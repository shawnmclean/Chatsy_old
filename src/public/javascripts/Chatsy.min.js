(function(){this.ChatsyEngine=function(){function a(a,b){var c;this.user=b;if(!this.user)throw new ReferenceError("User cannot be null.");this.socket=io.connect(a),c=this,this.socket.on("joinedConfirm",function(a){return c.joinRoomConfirmed(a.roomId)})}a.prototype.rooms=[],a.prototype.unConfirmedRooms=[],a.prototype.user=null,a.prototype.socket=null,a.prototype.joinRoom=function(a){if(!a instanceof ChatsyRoom)throw new Exception('parameter must be of type "ChatsyRoom"');this.socket.emit("joinRoom",{room:a.data,user:this.user});if(!(this.unConfirmedRooms.indexOf(a)>=0))return this.unConfirmedRooms.push(a)},a.prototype.joinRoomConfirmed=function(a){var b;b=this.unConfirmedRooms.filter(function(b,c,d){return b.data.roomId===a})[0];if(b){this.rooms.push(b);return b.joinedConfirm()}};return a}(),this.ChatsyRoom=function(){function a(a,b,c){this.engine=a,this.data=b;if(!this.engine||!this.data)throw new ReferenceError("All arguments should not be null.");c&&(this.messageRecieved=c.messageRecieved,this.userJoined=c.userJoined,this.userLeave=c.userLeave),this.engine.joinRoom(this,this.user)}a.prototype.data=null,a.prototype.users=null,a.prototype.engine=null,a.prototype.messageRecieved=null,a.prototype.userJoined=null,a.prototype.userLeave=null,a.prototype.joinedConfirm=function(){return console.log("Joined room: ",this.data)},a.prototype.createMessage=function(a){};return a}(),function(a){var b;return b={Away:0,Back:1,Visible:2,Hidden:3}}(typeof exports=="undefined"?this.Chatsy={}:exports)}).call(this)